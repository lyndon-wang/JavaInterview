# 图解TCP/IP阅读笔记

## 第1章——网络基础知识

### 1.2 计算机与网络发展的7个阶段

1. 批处理

   批处理，就是指实现将用户程序和数据装入卡带或磁带，由计算机按一定顺序读取，使得用户所要执行的程序和数据可以一并批量得到处理的方式。批处理时代的计算机主要用于大规模计算，使用起来较为复杂且不便，普通人难以操作。

   ![image-20220521193517835](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205211935872.png)

2. 分时系统

   > 分时系统重要特性——**多路性，独占性，交互性和及时性**

   指多个终端与同一个计算机连接，允许多个用户使用同一台计算机。以非常快的时间间隔轮流给每个用户使用，让用户感觉“好像自己在单独使用一台计算机”。从这一时期开始，网络与计算机之间的关系逐渐浮出水面，小型计算机随机产生，办公场所与工厂也逐渐引入计算机。

   ![image-20220525192732236](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205251927291.png)

3. 计算机之间的通信

   在分时系统的那个年代，虽然计算机每个终端之间都用通信线路相连，但是这不意味着计算机与计算机之间可以相互通信，当时想要把一台计算机中数据转移到另一台中需要先将数据保存到外部存储介质中再把介质送到目的计算机中实现数据转储。当计算机之间的通信技术诞生以后，只需一根通信线路连接就可以实现数据的互传，提高了可用性，操作更加人性化。

   ![image-20220525193245128](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205251932171.png)

4. 计算机网络的诞生

   20世纪80年代，一种能够互连多种计算机的网络随之诞生，它能够让各式各样的计算机相互连接，人们对网络不再陌生。窗口系统（就是现在的打开一个程序或者页面就有一个窗口，系统可以把多个程序分配在多个窗口中执行）的诞生更是让用户体验到了网络的便捷。

   ![image-20220525193723750](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205251937798.png)

5. 互联网的普及

   20世纪90年代，很多公司和大学已经有了“一人一机”的环境，但是这种环境搭建的成本不菲，使用过程也有许多问题，不同厂商之间的产品并不适配，所以有一个技术可以连接不同厂商的计算机（异构型计算机之间的连接）建立一个成本更低的网络环境，这就是现在我们看到的互联网技术。只要人们接入互联网，无论多远都可以通过个人电脑实现即时沟通和交流。

   ![image-20220525194317699](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205251943750.png)

6. 以互联网技术为中心的时代

   互联网的普及和发展对通信领域产生了巨大的影响，例如曾经一直作为通讯基础的电话网，随着互联网的发展，其地位逐渐被IP网取代，通过IP网人们不仅可以实现电话通信，还能实现其他各种各样的通信方式。

   ![image-20220525194900162](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205251949206.png)

7. 从“单纯建立连接”到“安全建立连接”

   网络互连使得人们可以通过计算机自由的连接彼此，但同时也带来了计算机病毒的侵害，信息泄露，网络欺诈等负面问题，所以人们从最开始的只关注单纯的连接性到慢慢的更加注重安全性，现在不单单满足于“**建立连接**”，更加追求“**安全建立连接**”的目标。

8. 手握金刚钻的`TCP/IP`

   互联网是由许多独立发展的网络通信技术融合而成的，而是他们不断融合并实现统一的正时`TCP/IP`技术，`TCP/IP`是通信协议的统称，在学习它的核心机制之前有必要先理清“协议”的概念。

### 1.3 协议

1. 随处可见的协议

   ![image-20220528104339620](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205281043697.png)

2. 协议的必要性

   简单来说协议是计算机与计算机之间通过网络实现通信时事先达成的一种“约定”，这使得不同的厂商，不同的操作系统等等之间的计算机只要遵循相同的协议就可以实现通信。

3. 协议如同人与人的对话

   协议如同人们的对话，如果两个人语言不同=通就无法明确对方所表达的意思，计算机也是如此，在进行网络通信时可以理解是依据类似于人类的“语言”实现了相互通信。

4. 计算机中的协议

   在设计计算机程序与硬件问题时要充分考虑通信过程中可能会遇到的各种异常以及对异常的处理方式，在实际遇到问题时正在通信的计算机之间也必须具备相应的设备和程序以应对异常。在计算机通信中事先达成一个详细的约定，并遵循这一约定进行处理尤为重要，这种约定其实就是“协议”。

5. 分组交换协议

   分组交换指的是将大数据分割成一个个叫做包（Packet）的较小单位进行传输的方法。

   ![image-20220528111117451](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205281111491.png)

   一个较大的数据分成多个分组时有必要将序号写入包中确保接收端可以正确组装，通信协议中通常会规定报文首部应该写入哪些信息以及如何处理这些信息。为确保双方正常通信，分组的发送方和接收方有必要对报文首部和内容保持一致的定义和解释。

### 1.4 协议由谁规定

一开始的时候各家的公司都使用各自的网络体系结构以及协议，即使从物理层面连接两台异构计算机也无法实现正常通信。随着越来越多公司意识到兼容性的重要性，所以ISO制定了一个国际标准OSI，对通信系统进行了标准化。但是最后并没有得到普及，不过OSI协议经常作为指导方针被其他协议在制定时所参考。**TCP/IP是由IEEE所建议的、致力于推进其标准化作业的一种协议。**

### 1.5 协议分层与OSI参考模型

1. 协议的分层

   协议分层如同计算机软件中的模块化开发，OSI参考模型的建议是比较理想的，每个分层独立使用，互不影响，扩展性和灵活度高。此外通过分层能够细分通信功能，单独实现每个层的协议，并界定各个分层的具体责任和义务，但是过于模块化会导致处理变得更加沉重，可能会有重复性操作。

2. OSI参考模型

   OSi参考模型将复杂的协议整理并分为了7个易于理解的分层。

   ![image-20220529163253985](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205291632049.png)

   参考模型终究只是一个模型，只是对各层做了一个粗略的界定，并没有详细的定义，只是一个引导作用，但不能否定他的参考意义。

3. OSI模型各个分层的作用

   ![image-20220529163450191](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205291634259.png)

### 1.6 OSI参考模型通信处理举例

传输过程从发送端开始，又第七层（应用层）一路到第一层（物理层）向下传输数据，每经过一层就会附加上当前层的一些“首部”信息，然后发送到接收方，接收方从第一层一路网上传输，没经过一层就把对应的“首部”分离，最后将数据原封不动的发送到接收方。

![image-20220529164329230](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205291643276.png)

### 1.7 传输方式的分类

1. 面向有连接型和面向无连接型
   - 面向连接：发送数据前要确保双方之间有一条通信线路，好比打电话，必须在通信传输前后专门进行建立和断开连接的处理。
   - 面向无连接：不要求建立连接和断开，好比寄快递一样，无需确认对端是否存在，即使接收方无法接受到信息发送方也能发送出去。
2. 电路交换和报文交换
   - 电路交换：历史相对久远，常见于过去的电话网，通过一条电路进行连接交换数据，电路建立后在没有断开之前一直是被单个用户独占的。
   - 报文交换：让连接到通信电路的计算机将要发送的数据分成多个数据包，按一定顺序发送，每个分组写入发送端和接收端的地址，即使同一线路也能服务于多个用户，提高了线路利用率。
3. 根据接收端数量分类
   - 单播：一对一通信，如早期的固定电话通信
   - 广播：一对多通信，将数据发送给一定范围内的非特定的多个对象
   - 多播：类似于广播，不同之处在于多播要限定某一组主机作为接收端。典型的例子是电视会议。
   - 任播：从目标主机群中选择一台最符合网络条件的主机作为目标主机发送消息。

![image-20220529165727549](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202205291657616.png)

### 1.8 地址

通信传输中，发送端和接收端都可以视为通信主体，他们都有一个所谓的“地址”信息加以标识出来。

1. 地址的唯一性

   在同一个通信网络中不允许有两个相同地址的通信主体存在。在广播、多播和任播中可能接受方不止一个，可以对这些由多个设备组成的一组通信赋予同一个具有唯一特性的地址，从而避免产生歧义。

   ![image-20220618192433698](https://typora-imagehost-1308499275.cos.ap-shanghai.myqcloud.com/2022-5/202206181924762.png)

